#include "script_component.hpp"
params ["_areaArray", "_vehicle", "_guard", "_gate"];


// _guard setDir (_guard getDir _vehicle);
_guard lookAt _vehicle;
_guard doWatch _vehicle;
_guard playMoveNow "Acts_ShieldFromSun_in";
_guard playMove "Acts_ShieldFromSun_loop";

_guard addEventHandler ["AnimDone", {
    params ["_unit", "_anim"];
	_unit playMove "Acts_ShieldFromSun_loop";
}];

[{
    params ["_areaArray", "_guard", "_vehicle", "_gate"];
	_guard distance _vehicle < 40
},
{
    params ["_guard", "_vehicle", "_gate"];
	_guard removeAllEventHandlers "AnimDone";
	_guard playMoveNow "Acts_ShieldFromSun_out";
    _guard doWatch _vehicle;

	[_guard, _vehicle, _gate] call grad_borderCrossing_fnc_checkVehicle;

}, [_guard, _vehicle, _gate]] call CBA_fnc_waitUntilAndExecute;
